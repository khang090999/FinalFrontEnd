var noibat=
[
    {
        path:"1423.jpg",
        drink:"TRÀ HOA ĐẬU BIẾC MACCHIATO",
        price: 52,
    },
    {
        path:"1615.jpg",
        drink:"TRÀ DƯA HẤU BẠC HÀ",
        price: 49,
    },
    {
        path:"1616.jpg",
        drink:"SINH TỐ DƯA HẤU YOGURT",
        price: 59,
    },
    {
        path:"222.jpg",
        drink:"MATCHA ĐÁ XAY",
        price: 59,
    },
    {
        path:"1421.jpg",
        drink:"MATCHA MACCHIATO",
        price: 52,
    },
    {
        path:"28.jpg",
        drink:"TRÀ ĐÀO CAM SẢ",
        price: 55,
    },
    {
        path:"1419.jpg",
        drink:"TRÀ ĐEN MACCHIATO",
        price: 48,
    },
    {
        path:"178.jpg",
        drink:"CÀ PHÊ ĐEN ĐÁ",
        price: 39,
    },
    {
        path:"180.jpg",
        drink:"CÀ PHÊ SỮA ĐÁ",
        price: 39,
    },
];
var caphe=
[
    {
        path:"11.jpg",
        drink:"AMERICANO NÓNG",
        price: 49,
    },

    {
        path:"109.jpg",
        drink:"AMERICANO ĐÁ",
        price: 49,
    },
    {
        path:"213.jpg",
        drink:"CAPPUCINO NÓNG",
        price: 55,
    },
    {
        path:"229.jpg",
        drink:"CARAMEL ĐÁ XAY",
        price: 59,
    },
    {
        path:"1293.jpg",
        drink:"CARAMEL MACHIATO NÓNG",
        price: 65,
    },
    {
        path:"1291.jpg",
        drink:"CARAMEL MACHIATO ĐÁ",
        price: 65,
    },
    {
        path:"1357.jpg",
        drink:"ESPRESSO ĐÁ",
        price: 45,
    },
    {
        path:"14.jpg",
        drink:"ESPRESSO NÓNG",
        price: 45,
    },
    {
        path:"230.jpg",
        drink:"HAZELNUT ĐÁ XAY",
        price: 59,
    },
    {
        path:"218.jpg",
        drink:"LATTE NÓNG",
        price: 55,
    },
    {
        path:"216.jpg",
        drink:"LATTE ĐÁ",
        price: 55,
    },
    {
        path:"223.jpg",
        drink:"MOCHA NÓNG",
        price: 59,
    },
    {
        path:"224.jpg",
        drink:"MOCHA ĐÁ",
        price: 59,
    },
    {
        path:"231.jpg",
        drink:"MOCHA ĐÁ XAY",
        price: 59,
    },
    {
        path:"134.jpg",
        drink:"CÀ PHÊ ĐEN NÓNG",
        price: 39,
    },
    {
        path:"178.jpg",
        drink:"CÀ PHÊ ĐEN ĐÁ",
        price: 39,
    },
    {
        path:"184.jpg",
        drink:"CÀ PHÊ SỮA NÓNG",
        price: 39,
    },
    {
        path:"180.jpg",
        drink:"CÀ PHÊ SỮA ĐÁ",
        price: 39,
    },
    {
        path:"168.jpg",
        drink:"BẠC SỈU",
        price: 39,
    },
];
var socola=
[
    {
        path:"42.jpg",
        drink:"SÔ CÔ LA ĐÁ XAY",
        price: 59,
    },
    {
        path:"1275.jpg",
        drink:"COOKIES ĐÁ XAY",
        price: 59,
    },
];
var traicay=
[
    {
        path:"1277.jpg",
        drink:"SODA VIỆT QUẤT",
        price: 45,
    },
    {
        path:"174.jpg",
        drink:"SINH TỐ VIỆT QUẤT",
        price: 59,
    },
    {
        path:"1616.jpg",
        drink:"SINH TỐ DƯA HẤU YOGURT",
        price: 59,
    },
    {
        path:"1278.jpg",
        drink:"MOJITO CHANH DÂY",
        price: 45,
    },
    {
        path:"1280.jpg",
        drink:"NƯỚC CAM TƯƠI 100%",
        price: 65,
    },
    {
        path:"500.jpg",
        drink:"SINH TỐ CAM XOÀI",
        price: 59,
    },
    {
        path:"1279.jpg",
        drink:"MOJITO CHANH TƯƠI",
        price: 45,
    },
];
var tra=
[
    {
        path:"1423.jpg",
        drink:"TRÀ HOA ĐẬU BIẾC MACCHIATO",
        price: 52,
    },
    {
        path:"1615.jpg",
        drink:"TRÀ DƯA HẤU BẠC HÀ",
        price: 49,
    },
    {
        path:"206.jpg",
        drink:"TRÀ HƯƠNG VỊ CHANH NÓNG",
        price: 35,
    },
    {
        path:"207.jpg",
        drink:"TRÀ HƯƠNG VỊ CHANH ĐÁ",
        price: 35,
    },
    {
        path:"209.jpg",
        drink:"TRÀ HƯƠNG VỊ BẠC HÀ NÓNG",
        price: 35,
    },
    {
        path:"210.jpg",
        drink:"TRÀ HƯƠNG VỊ BẠC HÀ ĐÁ",
        price: 35,
    },
    {
        path:"222.jpg",
        drink:"MATCHA ĐÁ XAY",
        price: 59,
    },
    {
        path:"220.jpg",
        drink:"TRÀ MATCHA LATTE NÓNG",
        price: 55,
    },
    {
        path:"221.jpg",
        drink:"TRÀ MATCHA LATTE ĐÁ",
        price: 55,
    },
    {
        path:"1419.jpg",
        drink:"TRÀ ĐEN MACCHIATO",
        price: 48,
    },
    {
        path:"1421.jpg",
        drink:"MATCHA MACCHIATO",
        price: 52,
    },
    {
        path:"28.jpg",
        drink:"TRÀ ĐÀO CAM SẢ",
        price: 55,
    },
];
//dua du lieu tu array vao
function getInfo()
{
    var d1= document.getElementById("best");
    var d2= document.getElementById("coffee");
    var d3= document.getElementById("chocolate");
    var d4= document.getElementById("fruit");
    var d5= document.getElementById("tea");
    
    for(var i=0;i<noibat.length;i++)
    {
        var div1= document.createElement("div");
        div1.className="drink";
        var div2= document.createElement("div");
        var p1= document.createElement("p");
        var p2= document.createElement("p");
        p2.className="price";
        div2.style.backgroundImage="url("+noibat[i].path+")";
        div2.appendChild(p1);
        p1.innerHTML=noibat[i].drink;
        var input= document.createElement("input");
        input.value="Price: "+noibat[i].price+"K";
        input.name=noibat[i].drink;
        input.type="button";
        input.addEventListener("click", buyProduct);
        input.addEventListener("click", showCup);
        p2.appendChild(input);
        div1.appendChild(div2);
        div1.appendChild(p2);
        d1.appendChild(div1);
    }
    for(var i=0;i<caphe.length;i++)
    {
       
        var div1= document.createElement("div");
        div1.className="drink";
        var div2= document.createElement("div");
        var p1= document.createElement("p");
        var p2= document.createElement("p");
        p2.className="price";
        div2.style.backgroundImage="url("+caphe[i].path+")";
        div2.appendChild(p1);
        p1.innerHTML=caphe[i].drink;
        var input= document.createElement("input");
        input.value="Price: "+caphe[i].price+"K";
        input.name=caphe[i].drink;
        input.type="button";
        input.addEventListener("click", buyProduct);
        input.addEventListener("click", showCup);
        p2.appendChild(input);
        div1.appendChild(div2);
        div1.appendChild(p2);
        d2.appendChild(div1);
    }
    for(var i=0;i<socola.length;i++)
    {
       
        var div1= document.createElement("div");
        div1.className="drink";
        var div2= document.createElement("div");
        var p1= document.createElement("p");
        var p2= document.createElement("p");
        p2.className="price";
        div2.style.backgroundImage="url("+socola[i].path+")";
        div2.appendChild(p1);
        p1.innerHTML=socola[i].drink;
        var input= document.createElement("input");
        input.value="Price: "+socola[i].price+"K";
        input.name=socola[i].drink;
        input.type="button";
        input.addEventListener("click", buyProduct);
        input.addEventListener("click", showCup);
        p2.appendChild(input);
        div1.appendChild(div2);
        div1.appendChild(p2);
        d3.appendChild(div1);
    }
    for(var i=0;i<traicay.length;i++)
    {
       
        var div1= document.createElement("div");
        div1.className="drink";
        var div2= document.createElement("div");
        var p1= document.createElement("p");
        var p2= document.createElement("p");
        p2.className="price";
        div2.style.backgroundImage="url("+traicay[i].path+")";
        div2.appendChild(p1);
        p1.innerHTML=traicay[i].drink;
        var input= document.createElement("input");
        input.value="Price: "+traicay[i].price+"K";
        input.name=traicay[i].drink;
        input.type="button";
        input.addEventListener("click", buyProduct);
        input.addEventListener("click", showCup);
        p2.appendChild(input);
        div1.appendChild(div2);
        div1.appendChild(p2);
        d4.appendChild(div1);
    }
    for(var i=0;i<tra.length;i++)
    {
       
        var div1= document.createElement("div");
        div1.className="drink";
        var div2= document.createElement("div");
        var p1= document.createElement("p");
        var p2= document.createElement("p");
        p2.className="price";
        div2.style.backgroundImage="url("+tra[i].path+")";
        div2.appendChild(p1);
        p1.innerHTML=tra[i].drink;
        var input= document.createElement("input");
        input.value="Price: "+tra[i].price+"K";
        input.name=tra[i].drink;
        input.type="button";
        input.addEventListener("click", buyProduct);
        input.addEventListener("click", showCup);
        p2.appendChild(input);
        div1.appendChild(div2);
        div1.appendChild(p2);
        d5.appendChild(div1);
    }
}
var check1=0, check2=0, check3=0;check4=0,check5=0;
//show menu chon nuoc uong
function showMenu()
{
    var div=document.getElementsByClassName("top");
    var div1=document.getElementsByClassName("subMenu"); 
    var arrow = document.getElementsByClassName("fa");
        div[0].onclick= function()
        {
            
            if(check1==0)
            {
                div1[0].style.height="1160px";
                arrow[0].style.transform= "rotate(0)";
                check1=1;
            }
            else 
            {
                div1[0].style.height="50px";
                arrow[0].style.transform= "rotate(180deg)";
                check1=0;
            }
        }
        div[1].onclick= function()
        {
            if(check2==0)
            {
                div1[1].style.height="2600px";
                arrow[1].style.transform= "rotate(0)";
                check2=1;
            }
            else 
            {
                div1[1].style.height="50px";
                arrow[1].style.transform= "rotate(180deg)";
                check2=0;
            }
        }
        div[2].onclick= function()
        {
            if(check3==0)
            {
                div1[2].style.height="500px";
                arrow[2].style.transform= "rotate(0)";
                check3=1;
            }
            else 
            {
                div1[2].style.height="50px";
                arrow[2].style.transform= "rotate(180deg)";
                check3=0;
            }
        }
        div[3].onclick= function()
        {
            if(check4==0)
            {
                div1[3].style.height="1160px";
                arrow[3].style.transform= "rotate(0)";
                check4=1;
            }
            else 
            {
                div1[3].style.height="50px";
                arrow[3].style.transform= "rotate(180deg)";
                check4=0;
            }
        }
        div[4].onclick= function()
        {
            if(check5==0)
            {
                div1[4].style.height="1500px";
                arrow[4].style.transform= "rotate(0)";
                check5=1;
            }
            else 
            {
                div1[4].style.height="50px";
                arrow[4].style.transform= "rotate(180deg)";
                check5=0;
            }
        }
}
 //show thoi gian giao hang
function showTime()
{
 var c1= document.getElementById("now");
 var c2= document.getElementById("later");
 var time= document.getElementById("time");
 c1.onclick= function()
 {

     time.style.display="none";
 }
 c2.onclick = function()
 {
 
     time.style.display="inline";
 }
}

var temp=0;
var countCart=window.localStorage.getItem("count");  
//show div chon menu va shop cart
function getMenu()
{
    countCart=window.localStorage.getItem("count");   
    var d=document.getElementById("menu");
    var b= document.getElementById("choose");
    if(temp <2 ){
        b.value="XEM GIỎ HÀNG";
        d.style.display="inline";
        d.style.transform="translateY(-760px)";
        temp++;
        }
    var d1=document.getElementById("number");
    var info=document.getElementById("customerInfo");
    var form=document.getElementById("customerForm");
    var div= document.getElementById("cupNum");
        if(temp>=3 &&  (countCart>0) && temp<5)
        {
            div.style.opacity="0";
            d1.style.transform="translateY(-1450px)";
            b.value="ĐẶT HÀNG";
            info.style.display="inline";
            form.style.display="none";
            customerInfo();
            temp++;
        }
        if(temp==5){alert("Đặt hàng thành công");}
}
//check form
function checkInfo()
{
    var email= document.getElementById("mail");
    var name= document.getElementById("name"); 
    var phone=document.getElementById("phone");
    var place= document.getElementById("place"); 
    var district= document.getElementById("district"); 
    var city= document.getElementById("city"); 
    var  list=document.checkForm.getElementsByClassName("warn");
    if(temp==2){
    if(name.value.match("^[a-zA-Z]+")==null)
    {
        list[0].style.opacity="1";
        name.focus();
        return false; 
    }
    else
    list[0].style.opacity="0";
    if(phone.value.match("^[+84]?[0-9]{10,12}$")==null)
    {
        list[1].style.opacity="1";
        phone.focus();
        return false; 
    }
    else
    list[1].style.opacity="0";
    if(email.value.match("^[a-zA-Z0-9]+[@][a-zA-Z]+[.][a-zA-Z]+([.][a-zA-Z]+)?$")==null)
    { 
        list[2].style.opacity="1";
        email.focus();
        return false; 
    }
    else
    {
    list[2].style.opacity="0";  
    }
    if(place.value.match("^[a-zA-Z]+")==null)
    {
        list[3].style.opacity="1";
        place.focus();
        return false; 
    }
    else
    list[3].style.opacity="0";
    if(district.value.match("^[a-zA-Z]+")==null)
    {
        list[3].style.opacity="1";
        district.focus();
        return false; 
    }
    else
    list[3].style.opacity="0";
    if(city.value.match("^[a-zA-Z]+")==null)
    {
        list[3].style.opacity="1";
        city.focus();
        return false; 
    }
    else
    list[3].style.opacity="0";

    temp=3;
    getMenu();
    return true;
    }
}
//tim nuoc uong trong day
function findProduct(code)
{
    for(var i=0;i<noibat.length;i++)
    if(noibat[i].drink==code)
    return noibat[i];

    for(var i=0;i<caphe.length;i++)
    if(caphe[i].drink==code)
    return caphe[i];

    for(var i=0;i<socola.length;i++)
    if(socola[i].drink==code)
    return socola[i];
  
    for(var i=0;i<traicay.length;i++)
    if(traicay[i].drink==code)
    return traicay[i];
  
    for(var i=0;i<tra.length;i++)
    if(tra[i].drink==code)
    return tra[i];
    return null;
}
//khoi tao bien count
function ready()
{
    if (window.localStorage.getItem("count")==null)
    window.localStorage.setItem("count",0);
}
//mua san pham
function buyProduct()
{
      //lay ma sp dang dung lam name trong nut "mua"
      var masp=event.target.name;
      var result=findProductLocal(masp);
      if(result==false) //masp chua co trong local
      {
          window.localStorage.setItem(masp,1);
          var c=window.localStorage.getItem("count");
          c++;
          window.localStorage.setItem("count",c);
       
      }
      showCart();
      
  }
  function findProductLocal(masp)
  {
      for (i=0;i<window.localStorage.length;i++)
      {
          var result=window.localStorage.getItem(masp);
          if(result!=null) 
          return true;
      }
      return false;
}
  //xuat san pham ra shopping cart

function showCart()
{
    var sum=0;
    var s="<div id='cart'>";
     s=s+"<table cellspacing='0'>";
    for(i=0;i< window.localStorage.length;i++)
    {
        var masp= window.localStorage.key(i);
        if(masp!=null)
        {
            var result = findProduct(masp);
            if(result!=null)
            {
                s=s+"<tr>";
                s=s+"<td>";
                s=s+"<a id='remove' href='#' onclick='del(\""+result.drink+"\");'>&times;</a>";
               
                s=s+"<span id='drinkName'>"+result.drink+"</span>";
             
                s=s+"</td>";

                s=s+"<td><input type='number' class='quantity' value='"+window.localStorage.getItem(masp)+"' min='1' max='10' onchange='update(\""+result.drink+"\",this);customerInfo();'></td>";

                s=s+"<td id='each'>"+ result.price+".000 VND</td>";
                s=s+"</tr>";
                sum=sum+result.price*window.localStorage.getItem(masp);
            }
        }
    }
    s=s+"</table>";
    s=s+"</div>"
    s=s+"<p id='totalMoney'>Thành tiền: <br><span id='money'>"+sum+".000 VND</span> <br><span id='cont' onclick='contShopping();'>Tiếp tục mua hàng </span> </p>";
   
    var div=document.getElementById("shoppingCart");
    div.innerHTML=s;
}
// sua so luong mua trong local dua vao ma san pham
function update(masp, control_input)
{
    window.localStorage.setItem(masp,control_input.value);
    showCart();
}
//xoa sp trong local khi co ma sp
function del(masp)
{
    window.localStorage.removeItem(masp);
    var c=window.localStorage.getItem("count");
    var d=document.getElementById("menu");
    if (c!=null)
    {
        c--;
        window.localStorage.setItem("count",c);
        customerInfo();
    }
   
    showCart();
    if(c==0) {
        contShopping();
        checkShowCup();
    }
}    
//tiep tuc mua hang
function contShopping()
{
    var d1=document.getElementById("number");
    d1.style.transform="translateY(0)";
    var b= document.getElementById("choose");
    var div= document.getElementById("cupNum");
    div.style.opacity="1";
    b.value="XEM GIỎ HÀNG";
    var info=document.getElementById("customerInfo");
    var form=document.getElementById("customerForm");
    info.style.display="none";
    form.style.display="inline";
    temp=2;
}
// show so luong nuoc uong khi mua
function showCup()
{  
     countCart=window.localStorage.getItem("count");  
    var div= document.getElementById("cupNum");
    if (countCart==0) div.style.opacity="0";
    else {
        div.style.opacity="1";
        div.innerHTML="<img src='ly.png'> x "+ countCart;
    }

}
 function checkShowCup()
{
    countCart=window.localStorage.getItem("count");  
    var div= document.getElementById("cupNum");
    if (countCart>0) {
        div.style.opacity="1";
        div.innerHTML="<img src='ly.png'> x "+ countCart;
    }
    else  div.style.opacity="0";
}
function customerInfo()
{   
    var sum=0;
    for(i=0;i< window.localStorage.length;i++)
    {
        var masp= window.localStorage.key(i);
        if(masp!=null)
        { var result = findProduct(masp);
            if(result!=null) sum=sum+result.price*window.localStorage.getItem(masp);
        }
       
    }
        var masp= window.localStorage.key(i);
    var name=document.getElementById("name");
    var phone=document.getElementById("phone");
    var mail=document.getElementById("mail");
    var place= document.getElementById("place");
    var district=document.getElementById("district");
    var city=document.getElementById("city");
    var set=document.getElementsByName("time");
    var time=document.getElementById("time");
    var info=document.getElementById("customerInfo");
    var s="<h5>Thông tin người nhận</h5>";
    s=s+"Tên: <span>"+name.value+"</span><br>";
    s=s+"Số điện thoại: "+phone.value+"</span><br>"
    s=s+"Email <span>: "+mail.value+"</span><br><br>";
    s=s+"Địa chỉ người nhận:<span> "+place.value+"</span><br>";
    s=s+"Quận/Huyện:<span> "+district.value+"</span><br>";
    s=s+"Tỉnh/thành phố:<span> "+district.value+"</span><br><br>";
    s=s+"<img src='ly.png'> = "+sum+".000 VND<br><br>";
    s=s+"Thời điểm giao hàng:<span> ";
    if(set[0].checked === true)
    s=s+ set[0].value+"</span><br>";
    else if(set[1].checked === true)
    s=s+time.value+"</span><br><br>";
    s=s+"<span>Ghi chú:</span><br>";
    s=s+"<textarea placeholder='Ghi chú'></textarea>";
    info.innerHTML=s; 
    
}